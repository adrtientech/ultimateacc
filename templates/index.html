{% extends "base.html" %}

{% block title %}{{ translations.title }}{% endblock %}

{% block content %}
<div class="accounting-app">
    <header class="app-header text-center py-4 mb-4">
        <div class="row align-items-center">
            <div class="col-md-4">
                <div class="language-selector">
                    <label for="language-select" class="form-label">{{ translations.language }}:</label>
                    <select id="language-select" class="form-select form-select-sm d-inline-block w-auto">
                        <option value="id" {% if language == 'id' %}selected{% endif %}>Bahasa Indonesia</option>
                        <option value="en" {% if language == 'en' %}selected{% endif %}>English</option>
                    </select>
                </div>
            </div>

            <div class="col-md-4">
                <h1 class="app-title mb-1">{{ translations.title }}</h1>
                <!-- Tampilkan info perusahaan dan mata uang jika sudah ada -->
                {% if company_name and currency_info %}
                <p class="app-subtitle mb-0">
                    {{ company_name }} - {{ currency_info.symbol }} {{ currency_info.code }}
                </p>
                {% endif %}
            </div>

            <div class="col-md-4 d-flex justify-content-end align-items-center">
                <button id="refresh-btn" class="btn btn-outline-info btn-sm me-2" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Refresh Current View">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
                <button id="undo-btn" class="btn btn-outline-warning btn-sm" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Undo Last Transaction">
                    <i class="fas fa-undo"></i> Undo
                </button>
                
                <p class="app-subtitle mb-0 ms-3">{{ translations.financial_statement }}</p>
            </div>
        </div>
    </header>

    <div class="row">
        <div class="col-md-3">
            <nav class="nav-sidebar">
                <div class="nav-section">
                    <h5 class="nav-section-title">{{ translations.beginning_balance }}</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('product-stocking')">
                                <i class="fas fa-boxes"></i> {{ translations.product_stocking }}
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('share-capital')">
                                <i class="fas fa-dollar-sign"></i> {{ translations.share_capital }}
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('ppe')">
                                <i class="fas fa-building"></i> Aset Tetap (PPE)
                            </a>
                        </li>
                    </ul>
                </div>

    

                <div class="nav-section">
                    <h5 class="nav-section-title">{{ translations.income }}</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('product-list')">
                                <i class="fas fa-list"></i> {{ translations.product_list }}
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('quantity-addition')">
                                <i class="fas fa-plus"></i> {{ translations.quantity_addition }}
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('sales')">
                                <i class="fas fa-shopping-cart"></i> {{ translations.sales }}
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h5 class="nav-section-title">{{ translations.expenses }}</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('expense-entry')">
                                <i class="fas fa-receipt"></i> {{ translations.expense_entry }}
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('payables-receivables')">
                                <i class="fas fa-handshake"></i> {{ translations.payables_receivables }}
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('charity')">
                                <i class="fas fa-heart"></i> {{ translations.charity }}
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('investment')">
                                <i class="fas fa-chart-pie"></i> {{ translations.investment }}
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('lending-borrowing')">
                                <i class="fas fa-exchange-alt"></i> {{ translations.lending }}/{{ translations.borrowing }}
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h5 class="nav-section-title">{{ translations.financial_statement }}</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('journal-entry')">
                                <i class="fas fa-book"></i> {{ translations.journal_entry }}
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('general-ledger')">
                                <i class="fas fa-ledger"></i> {{ translations.general_ledger }}
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('trial-balance')">
                                <i class="fas fa-balance-scale"></i> {{ translations.trial_balance }}
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('income-statement')">
                                <i class="fas fa-chart-line"></i> {{ translations.income_statement }}
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('balance-sheet')">
                                <i class="fas fa-clipboard-list"></i> {{ translations.balance_sheet }}
                            </a>
                        </li>
                        <li class="nav-item">
                    </ul>
                </div>
            </nav>
        </div>

        <div class="col-md-9">
            <main class="main-content">
                <div id="home-page" class="page active">
                    <div class="welcome-section text-center py-5">
                        <h2 class="welcome-title">{{ translations.financial_statement }}</h2>
                        <p class="welcome-subtitle">Select a function from the navigation menu to get started</p>
                        <div class="row mt-4">
                            <div class="col-md-4 mb-3">
                                <div class="info-card">
                                    <i class="fas fa-chart-pie fa-3x mb-3"></i>
                                    <h5>{{ translations.financial_statement }}</h5>
                                    <p>Track your company's financial performance</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="info-card">
                                    <i class="fas fa-boxes fa-3x mb-3"></i>
                                    <h5>{{ translations.product_list }}</h5>
                                    <p>Manage your inventory and products</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="info-card">
                                    <i class="fas fa-calculator fa-3x mb-3"></i>
                                    <h5>{{ translations.journal_entry }}</h5>
                                    <p>Record and manage financial transactions</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="product-stocking-page" class="page">
                    <div class="page-header">
                        <h3>{{ translations.product_stocking }}</h3>
                    </div>
                    <form id="product-stocking-form" class="form-container">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ translations.date }}</label>
                                <input type="date" class="form-control" name="date" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ translations.product_name }}</label>
                                <input type="text" class="form-control" name="product_name" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label class="form-label">{{ translations.initial_quantity }}</label>
                                <input type="number" class="form-control" name="initial_quantity" min="1" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">{{ translations.purchase_price }}</label>
                                <input type="number" class="form-control" name="purchase_price" step="0.01" min="0" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">{{ translations.selling_price }}</label>
                                <input type="number" class="form-control" name="selling_price" step="0.01" min="0" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">{{ translations.save }}</button>
                    </form>
                </div>

                <div id="share-capital-page" class="page">
                    <div class="page-header">
                        <h3>{{ translations.share_capital }}</h3>
                    </div>
                    <form id="share-capital-form" class="form-container">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ translations.paid_up_capital }}</label>
                                <input type="number" class="form-control" name="amount" step="0.01" min="0" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">{{ translations.save }}</button>
                    </form>
                </div>

                <div id="ppe-page" class="page">
                    <div class="page-header d-flex justify-content-between align-items-center">
                        <h3>Manajemen Aset Tetap (PPE)</h3>
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#ppe-form-modal">
                            <i class="fas fa-plus"></i> Tambah Aset Baru
                        </button>
                    </div>

                    <div class="card shadow-sm mb-4">
                        <div class="card-body d-flex justify-content-between align-items-center">
                            <div>
                                <h5 class="card-title mb-1">Pencatatan Depresiasi Akhir Periode</h5>
                                <p class="card-text text-muted">Jalankan proses ini di akhir tahun untuk mencatat semua beban depresiasi.</p>
                            </div>
                            <div class="d-flex align-items-center">
                                <select id="depreciation-period-select" class="form-select me-2" style="width: 120px;"></select>
                                <button id="record-depreciation-btn" class="btn btn-success">
                                    <i class="fas fa-calculator"></i> Catat Depresiasi
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="table-container">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Nama Aset</th>
                                    <th>Kategori</th>
                                    <th>Tgl. Beli</th>
                                    <th>Harga Perolehan</th>
                                    <th>Nilai Buku Saat Ini</th>
                                    <th>Metode Depresiasi</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="ppe-table-body">
                                <tr>
                                    <td colspan="7" class="text-center">
                                        <i class="fas fa-spinner fa-spin"></i> Memuat data aset...
                                    </td>
                                </tr>
                                </tbody>
                        </table>
                    </div>

                    <div class="text-center mt-3">
                        <button class="btn btn-info" data-bs-toggle="modal" data-bs-target="#depreciation-history-modal">
                            <i class="fas fa-history"></i> Lihat Riwayat Pencatatan Depresiasi
                        </button>
                    </div>
                </div>

                <div class="modal fade" id="ppe-form-modal" tabindex="-1" aria-labelledby="ppe-modal-title" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="ppe-modal-title">Tambah Aset Tetap Baru</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <form id="ppe-form">
                                    <input type="hidden" id="ppe-id" name="id">
                                    <div class="row">
                                        <div class="col-md-8 mb-3">
                                            <label class="form-label">Nama Aset</label>
                                            <input type="text" id="ppe-name" name="name" class="form-control" required>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label class="form-label">Kategori</label>
                                            <select id="ppe-category" name="category" class="form-select" required>
                                                <option value="Land">Tanah (Land)</option>
                                                <option value="Building">Bangunan (Building)</option>
                                                <option value="Equipment">Peralatan (Equipment)</option>
                                                <option value="Vehicle">Kendaraan (Vehicle)</option>
                                                <option value="Furniture and Fixtures">Perabotan (Furniture)</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4 mb-3">
                                            <label class="form-label">Tanggal Pembelian</label>
                                            <input type="date" id="ppe-purchase-date" name="purchase_date" class="form-control" required>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label class="form-label">Harga Perolehan</label>
                                            <input type="number" id="ppe-cost" name="cost" class="form-control" placeholder="Contoh: 5000000" required>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label class="form-label">Nilai Residu</label>
                                            <input type="number" id="ppe-salvage-value" name="salvage_value" class="form-control" placeholder="Contoh: 500000" required>
                                        </div>
                                    </div>
                                    <hr>
                                    <h6>Metode Depresiasi</h6>
                                    <div class="row">
                                    <div class="col-md-4 mb-3">
                                            <label class="form-label">Metode</label>
                                            <select id="ppe-depreciation-method" name="depreciation_method" class="form-select" required>
                                                <option value="straight_line">Straight-Line</option>
                                                <option value="double_declining">Double-Declining Balance</option>
                                                <option value="uop">Units of Production</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <label class="form-label">Umur Ekonomis (Tahun)</label>
                                            <input type="number" id="ppe-useful-life" name="useful_life" class="form-control" placeholder="Contoh: 5" required>
                                        </div>
                                    </div>
                                    <div id="uop-fields" class="row" style="display: none;">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Total Estimasi Unit Produksi</label>
                                            <input type="number" id="uop-total-units" name="uop_total_units" class="form-control">
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                                <button type="submit" form="ppe-form" class="btn btn-primary">Simpan Aset</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="depreciation-schedule-modal" tabindex="-1">
                    <div class="modal-dialog modal-xl">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="schedule-modal-title">Jadwal Depresiasi</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="table-responsive">
                                    <table class="table table-sm">
                                        <thead>
                                            <tr>
                                                <th>Periode</th>
                                                <th>Nilai Buku Awal</th>
                                                <th>Beban Depresiasi</th>
                                                <th>Akumulasi Depresiasi</th>
                                                <th>Nilai Buku Akhir</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        <tbody id="depreciation-schedule-body"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="depreciation-history-modal" tabindex="-1">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Riwayat Pencatatan Depresiasi</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Tgl. Catat</th>
                                            <th>Aset</th>
                                            <th>Periode</th>
                                            <th>Jumlah</th>
                                        </tr>
                                    </thead>
                                    <tbody id="depreciation-history-body"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal Baru untuk Preview Depresiasi -->
                <div class="modal fade" id="depreciation-preview-modal" tabindex="-1">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="depreciation-preview-title">Konfirmasi Pencatatan Depresiasi</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <p>Aset berikut akan dicatat depresiasinya untuk periode yang dipilih. Harap periksa sebelum melanjutkan.</p>
                                <table class="table table-sm">
                                    <thead>
                                        <tr>
                                            <th>Nama Aset</th>
                                            <th>Kategori</th>
                                            <th>Beban Depresiasi</th>
                                        </tr>
                                    </thead>
                                    <tbody id="depreciation-preview-body"></tbody>
                                </table>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                                <button type="button" id="confirm-record-depreciation-btn" class="btn btn-success">Ya, Konfirmasi dan Catat</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="product-list-page" class="page">
                    <div class="page-header">
                        <h3>{{ translations.product_list }}</h3>
                    </div>
                    <div class="table-container">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>{{ translations.product_name }}</th>
                                    <th>{{ translations.initial_quantity }}</th>
                                    <th>{{ translations.quantity_update }}</th>
                                    <th>{{ translations.purchase_price }}</th>
                                    <th>{{ translations.selling_price }}</th>
                                    <th>{{ translations.total_purchase_price }}</th>
                                </tr>
                            </thead>
                            <tbody id="product-list-tbody">
                                </tbody>
                        </table>
                    </div>
                </div>

                <div id="quantity-addition-page" class="page">
                    <div class="page-header">
                        <h3>{{ translations.quantity_addition }}</h3>
                    </div>
                    <form id="quantity-addition-form" class="form-container">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ translations.product_name }}</label>
                                <select class="form-select" name="product_name" required>
                                    <option value="">Select Product</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ translations.add_quantity }}</label>
                                <input type="number" class="form-control" name="additional_quantity" min="1" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">{{ translations.add }}</button>
                    </form>
                </div>

                <div id="sales-page" class="page">
                    <div class="page-header">
                        <h3>{{ translations.sales }}</h3>
                    </div>

                    <form id="sales-form" class="form-container">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ translations.date }}</label>
                                <input type="date" class="form-control" name="date" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ translations.customer }}</label>
                                <input type="text" class="form-control" name="customer" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label class="form-label">{{ translations.product_name }}</label>
                                <select class="form-select" name="product_name" required>
                                    <option value="">Select Product</option>
                                </select>
                            </div>
                            
                            <div class="col-md-4 mb-3">
                                <label class="form-label">{{ translations.quantity }}</label>
                                <input type="number" class="form-control" name="quantity" min="1" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">{{ translations.price }}</label>
                                <input type="number" class="form-control" name="price" step="0.01" min="0" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ translations.payment }}</label>
                                <select class="form-select" name="payment_type" required>
                                    <option value="cash">{{ translations.cash }}</option>
                                    <option value="receivable">{{ translations.receivable }}</option>
                                </select>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">{{ translations.record }}</button>
                    </form>
                    <hr class="my-4">

                    <div class="d-grid gap-2">
                        <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#settlementModal">
                            <i class="fas fa-hand-holding-usd"></i> Lakukan Pelunasan Piutang (Receivable Settlement)
                        </button>
                    </div>

                    <div class="modal fade" id="settlementModal" tabindex="-1" aria-labelledby="settlementModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="settlementModalLabel">{{ translations.settlement }} ({{ translations.receivable }})</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <form id="sales-receivable-payment-form" class="form-container">
                                        <div class="mb-3">
                                            <label for="sales-receivable-select" class="form-label">Unpaid Sales</label>
                                            <select id="sales-receivable-select" class="form-select" name="receivable_id" required>
                                                <option value="">Select a receivable to pay...</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="payment-amount-input" class="form-label">Payment Amount</label>
                                            <input id="payment-amount-input" type="number" class="form-control" name="payment_amount" step="0.01" min="0" required>
                                        </div>
                                        <button type="submit" class="btn btn-primary">{{ translations.record }} Payment</button>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="expense-entry-page" class="page">
                    <div class="page-header">
                        <h3>{{ translations.expense_entry }}</h3>
                    </div>
                    <form id="expense-form" class="form-container">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ translations.expense }}</label>
                                <select class="form-select" name="expense_type" required>
                                    <option value="">Select Expense Type</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ translations.nominal }}</label>
                                <input type="number" class="form-control" name="amount" step="0.01" min="0" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <label class="form-label">{{ translations.destination }}</label>
                                <input type="text" class="form-control" name="destination">
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">{{ translations.record }}</button>
                    </form>
                </div>

                <div id="payables-receivables-page" class="page">
    <div class="page-header">
        <h3>{{ translations.payables_receivables }}</h3>
        <p>Menampilkan daftar semua utang perusahaan dan piutang kepada pihak lain.</p>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header">
                    <h5 class="mb-0">{{ translations.debtors_list }} (Piutang)</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover table-sm">
                            <thead>
                                <tr>
                                    <th>Pihak Terkait</th>
                                    <th>Nominal</th>
                                    <th>Sumber</th>
                                    <th>Tanggal</th>
                                </tr>
                            </thead>
                            <tbody id="debtors-tbody">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header">
                    <h5 class="mb-0">{{ translations.creditors_list }} (Utang)</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover table-sm">
                            <thead>
                                <tr>
                                    <th>Pihak Terkait</th>
                                    <th>Nominal</th>
                                    <th>Sumber</th>
                                    <th>Tanggal</th>
                                </tr>
                            </thead>
                            <tbody id="creditors-tbody"> </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

                <div id="journal-entry-page" class="page">
                    <div class="page-header">
                        <h3>{{ translations.journal_entry }}</h3>
                    </div>
                    <div class="table-container">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>{{ translations.date }}</th>
                                    <th>{{ translations.account_title }}</th>
                                    <th>{{ translations.debit }}</th>
                                    <th>{{ translations.credit }}</th>
                                </tr>
                            </thead>
                            <tbody id="journal-entries-tbody">
                                </tbody>
                        </table>
                    </div>
                </div>

                <div id="general-ledger-page" class="page">
                    <div class="page-header">
                        <h3>{{ translations.general_ledger }}</h3>
                    </div>
                    <div id="general-ledger-content">
                        </div>
                </div>

                <div id="trial-balance-page" class="page">
                    <div class="page-header">
                        <h3>{{ translations.trial_balance }}</h3>
                    </div>
                    <div class="table-container">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>{{ translations.account }}</th>
                                    <th>{{ translations.debit }}</th>
                                    <th>{{ translations.credit }}</th>
                                </tr>
                            </thead>
                            <tbody id="trial-balance-tbody">
                                </tbody>
                        </table>
                    </div>
                </div>

                <div id="income-statement-page" class="page">
                    <div class="page-header">
                        <h3>{{ translations.income_statement }}</h3>
                    </div>
                    <div id="income-statement-content">
                        </div>
                </div>

                <div id="balance-sheet-page" class="page">
                    <div class="page-header">
                        <h3>{{ translations.balance_sheet }}</h3>
                    </div>
                    <div id="balance-sheet-content">
                        </div>
                </div>

                <div id="closing-entry-page" class="page">
                    <div class="container-fluid">
                        <h3 class="mb-4">{{ translations.closing_entry }}</h3>
                        <div class="card shadow-sm mb-4">
                            <div class="card-body text-center">
                                <h5 class="card-title">Lakukan Penutupan Periode Akuntansi?</h5>
                                <p class="card-text">
                                    Proses ini akan me-nol-kan semua akun Pendapatan dan Beban, lalu memindahkan laba bersih ke dalam Laba Ditahan (Retained Earnings).
                                    <br><strong>Tindakan ini tidak dapat dibatalkan.</strong> Pastikan semua transaksi untuk periode ini sudah tercatat.
                                </p>
                                <button id="create-closing-entry-btn" class="btn btn-primary btn-lg">
                                    <i class="fas fa-sync-alt"></i> Ya, Lakukan Proses Penutupan
                                </button>
                            </div>
                        </div>
                        <div id="closing-entry-result" class="mt-4" style="display:none;">
                            <h4>Jurnal Penutup yang Dihasilkan:</h4>
                            <div class="table-responsive">
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th>Tanggal</th>
                                            <th>Nama Akun dan Keterangan</th>
                                            <th>Debit</th>
                                            <th>Kredit</th>
                                        </tr>
                                    </thead>
                                    <tbody id="closing-entry-tbody"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="charity-page" class="page">
                    <div class="page-header">
                        <h3>{{ translations.charity }}</h3>
                    </div>
                    <form id="charity-form" class="form-container">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ translations.destination }}</label>
                                <input type="text" class="form-control" name="destination" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ translations.nominal }}</label>
                                <input type="number" class="form-control" name="amount" step="0.01" min="0" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">{{ translations.record }}</button>
                    </form>
                </div>

                <div id="investment-page" class="page">
                    <div class="page-header">
                        <h3>{{ translations.investment }}</h3>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h5>{{ translations.buy }} {{ translations.investment }}</h5>
                            <form id="investment-form" class="form-container">
                                <div class="mb-3">
                                    <label class="form-label">{{ translations.company_name }}</label>
                                    <input type="text" class="form-control" name="company_name" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">{{ translations.type_of_investment }}</label>
                                    <select class="form-select" name="investment_type" required>
                                        <option value="">Select Type</option>
                                        <option value="Stocks">Stocks</option>
                                        <option value="Bonds">Bonds</option>
                                        <option value="Mutual Funds">Mutual Funds</option>
                                        <option value="Real Estate">Real Estate</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">{{ translations.nominal }}</label>
                                    <input type="number" class="form-control" name="amount" step="0.01" min="0" required>
                                </div>
                                <button type="submit" class="btn btn-primary">{{ translations.buy }}</button>
                            </form>
                        </div>
                        
                        <div class="col-md-6">
                            <h5>{{ translations.sell }} {{ translations.investment }}</h5>
                            <form id="sell-investment-form" class="form-container">
                                <div class="mb-3">
                                    <label class="form-label">{{ translations.investment }}</label>
                                    <select class="form-select" name="investment_id" required>
                                        <option value="">Select Investment</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">{{ translations.final_value }}</label>
                                    <input type="number" class="form-control" name="sell_amount" step="0.01" min="0" required>
                                </div>
                                <button type="submit" class="btn btn-primary">{{ translations.sell }}</button>
                            </form>
                        </div>
                    </div>
                    
                    <div class="table-container mt-4">
                        <h5>Current Investments</h5>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>{{ translations.company_name }}</th>
                                    <th>{{ translations.type_of_investment }}</th>
                                    <th>{{ translations.date }}</th>
                                    <th>{{ translations.nominal }}</th>
                                </tr>
                            </thead>
                            <tbody id="investments-tbody">
                                </tbody>
                        </table>
                    </div>
                </div>

                <div id="lending-borrowing-page" class="page">
                    <div class="page-header">
                        <h3>{{ translations.lending }}/{{ translations.borrowing }}</h3>
                    </div>
                    
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h5>{{ translations.lending }}</h5>
                            <form id="lending-form" class="form-container">
                                <div class="mb-3">
                                    <label class="form-label">{{ translations.borrower_name }}</label>
                                    <input type="text" class="form-control" name="borrower_name" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">{{ translations.nominal }}</label>
                                    <input type="number" class="form-control" name="amount" step="0.01" min="0" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Description</label>
                                    <input type="text" class="form-control" name="description" placeholder="Tujuan pinjaman">
                                </div>
                                <button type="submit" class="btn btn-primary">{{ translations.record }}</button>
                            </form>
                        </div>
                        
                        <div class="col-md-6">
                            <h5>{{ translations.borrowing }}</h5>
                            <form id="borrowing-form" class="form-container">
                                <div class="mb-3">
                                    <label class="form-label">{{ translations.lender }}</label>
                                    <input type="text" class="form-control" name="lender_name" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">{{ translations.nominal }}</label>
                                    <input type="number" class="form-control" name="amount" step="0.01" min="0" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Description</label>
                                    <input type="text" class="form-control" name="description" placeholder="Purpose of borrowing">
                                </div>
                                <button type="submit" class="btn btn-primary">{{ translations.record }}</button>
                            </form>
                        </div>
                    </div>
                    
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h5>{{ translations.receivables_payment }} (Loan Payment Received)</h5>
                            <form id="loan-payment-form" class="form-container">
                                <div class="mb-3">
                                    <label class="form-label">Borrower</label>
                                    <select class="form-select" name="borrower_name" required>
                                        <option value="">Select Borrower</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Payment Amount</label>
                                    <input type="number" class="form-control" name="payment_amount" step="0.01" min="0" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Purchase with Receivable</label>
                                    <input type="text" class="form-control" name="purchase_description" placeholder="Optional: Description of purchase made with this loan payment">
                                </div>
                                <button type="submit" class="btn btn-primary">{{ translations.record }} Payment</button>
                            </form>
                        </div>
                        
                        <div class="col-md-6">
                            <h5>{{ translations.debt_payment }} (Debt Payment)</h5>
                            <form id="debt-repayment-form" class="form-container">
                                <div class="mb-3">
                                    <label class="form-label">Lender</label>
                                    <select class="form-select" name="lender_name" required>
                                        <option value="">Select Lender</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Payment Amount</label>
                                    <input type="number" class="form-control" name="payment_amount" step="0.01" min="0" required>
                                </div>
                                <button type="submit" class="btn btn-primary">{{ translations.record }} Payment</button>
                            </form>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="table-container">
                                <h5>{{ translations.debtors_list }} (Loans Given)</h5>
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Borrower Name</th>
                                            <th>Amount</th>
                                            <th>Date</th>
                                        </tr>
                                    </thead>
                                    <tbody id="loans-given-tbody">
                                        </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="table-container">
                                <h5>{{ translations.creditors_list }} (Loans Received)</h5>
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Lender Name</th>
                                            <th>Amount</th>
                                            <th>Date</th>
                                        </tr>
                                    </thead>
                                    <tbody id="loans-received-tbody">
                                        </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
</div>

<div id="message-container"></div>
{% endblock %}